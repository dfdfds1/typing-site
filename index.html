<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Typing Practice</title>
  <link href="https://fonts.googleapis.com/css2?family=Nanum+Myeongjo&display=swap" rel="stylesheet">
  <style>
    body {
      margin: 0;
      background: url("KakaoTalk_20250728_132331714.png") no-repeat center 44%;
      background-size: cover;
      background-attachment: fixed;
      font-family: 'Nanum Myeongjo', Georgia, serif;
      overflow: hidden;
    }

    .container {
      position: relative;
      width: 100vw;
      height: 100vh;
    }

    .typing-output {
      position: absolute;
      top: 43%;
      left: 58%;
      width: 34%;
      transform: translate(-50%, -50%);
      font-size: 18px;
      color: #ccc;
      line-height: 1.6;
      white-space: pre-wrap;
      word-break: break-word;
      letter-spacing: 0.03em;
      text-shadow: 0.3px 0.3px 0 #ccc;
      z-index: 1;
    }

    .highlight {
      color: black;
      text-shadow: none;
    }

    .typing-input {
      position: absolute;
      bottom: 16%;
      left: 10%;
      width: 80%;
      font-size: 16px;
      padding: 6px;
      background: transparent;
      border: none;
      outline: none;
      color: #555;
      letter-spacing: 0.02em;
      z-index: 1;
    }

    .left-box {
      position: absolute;
      top: 26%;
      left: 11%;
      width: 540px;
      height: 560px;
      cursor: pointer;
      z-index: 2;
    }

    .media-container {
      width: 100%;
      height: 100%;
    }

    .media-container iframe, .media-container img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      border: none;
    }

    .mode-button {
      position: absolute;
      top: 5%;
      right: 5%;
      z-index: 3;
      background: rgba(255,255,255,0.7);
      border: none;
      padding: 10px 16px;
      font-size: 14px;
      font-family: inherit;
      cursor: pointer;
      border-radius: 6px;
    }
  </style>
</head>
<body>
  <div class="container">
    <button class="mode-button" onclick="loadTypingMode()">타이핑 연습 시작</button>
    <div class="left-box" onclick="insertMedia()">
      <div class="media-container" id="mediaBox"></div>
    </div>
    <div id="output" class="typing-output"></div>
    <input id="input" class="typing-input" type="text" placeholder="Type here and press Enter..." />
  </div>

  <script>
    const input = document.getElementById("input");
    const output = document.getElementById("output");

    let typingLines = [];
    let currentLineIndex = 0;
    let currentMode = "free"; // "free" or "typing"
    let previewLine = "";

    const sampleLines = [
      "나는 너를 생각하며 하루를 시작해.",
      "작은 바람에도 마음이 흔들려.",
      "밤하늘의 별처럼 너는 반짝여.",
      "기억 속 너의 미소가 그리워진다.",
      "우리 함께한 시간은 언제나 소중해.",
      "가끔은 울고 싶을 만큼 보고 싶어.",
      "그날의 말들이 자꾸 떠오른다.",
      "이 노래는 너에게 바치는 마음이야.",
      "시간이 지나도 널 잊지 못할 거야.",
      "이 거리 어디에서도 네가 보일 것 같아.",
      "차가운 바람이 내 마음을 흔든다.",
      "사랑이라는 말이 아직 낯설어.",
      "잊으려 해도 잊혀지지 않아.",
      "혼자 걷는 길이 점점 익숙해져.",
      "눈 감으면 떠오르는 너의 눈동자."
    ];

    input.addEventListener("input", function () {
      if (currentMode === "typing") {
        const typed = input.value;
        const target = typingLines[currentLineIndex] || "";
        let result = "";

        for (let i = 0; i < target.length; i++) {
          const c = target[i];
          if (i < typed.length) {
            result += `<span class="highlight">${c}</span>`;
          } else {
            result += c;
          }
        }

        output.innerHTML = result;
      }
    });

    input.addEventListener("keydown", function (e) {
      if (e.key === "Enter") {
        if (currentMode === "typing") {
          const target = typingLines[currentLineIndex] || "";
          output.innerHTML += "\n";
          currentLineIndex++;
          if (currentLineIndex < typingLines.length) {
            input.value = "";
            input.placeholder = typingLines[currentLineIndex];
            output.textContent = typingLines.slice(0, currentLineIndex).join("\n");
          } else {
            currentMode = "free";
            input.placeholder = "Type here and press Enter...";
            input.value = "";
            output.textContent = "";
          }
        } else {
          const text = input.value;
          input.value = "";
          let i = 0;
          const interval = setInterval(() => {
            if (i < text.length) {
              output.textContent += text[i];
              i++;
            } else {
              clearInterval(interval);
              output.textContent += "\n";
            }
          }, 50);
        }
      }
    });

    function loadTypingMode() {
      currentMode = "typing";
      typingLines = shuffle([...sampleLines]).slice(0, 15);
      currentLineIndex = 0;
      input.value = "";
      input.placeholder = typingLines[0];
      output.textContent = "";
    }

    function insertMedia() {
      const url = prompt("GIF 이미지 주소나 YouTube 링크를 입력하세요:");
      const box = document.getElementById("mediaBox");

      if (!url) return;

      if (url.includes("youtube.com") || url.includes("youtu.be")) {
        let embedUrl = url;
        if (url.includes("watch?v=")) {
          const id = url.split("watch?v=")[1].split("&")[0];
          embedUrl = `https://www.youtube.com/embed/${id}`;
        } else if (url.includes("youtu.be")) {
          const id = url.split("youtu.be/")[1];
          embedUrl = `https://www.youtube.com/embed/${id}`;
        }
        box.innerHTML = `<iframe src="${embedUrl}" frameborder="0" allowfullscreen></iframe>`;
      } else if (url.match(/\.(gif|jpg|jpeg|png)$/i)) {
        box.innerHTML = `<img src="${url}" alt="media">`;
      } else {
        alert("지원되지 않는 형식입니다. GIF나 YouTube 링크만 지원됩니다.");
      }
    }

    function shuffle(arr) {
      return arr.sort(() => Math.random() - 0.5);
    }
  </script>
</body>
</html>



