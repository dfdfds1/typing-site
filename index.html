<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Typing Practice</title>
  <link href="https://fonts.googleapis.com/css2?family=Nanum+Myeongjo&display=swap" rel="stylesheet">

  <style>
    * { box-sizing: border-box; }

    body {
      margin: 0;
      padding: 0;
      background: url("KakaoTalk_20250728_132331714.png") no-repeat center 46%;
      background-size: cover;
      background-attachment: fixed;
      font-family: 'Nanum Myeongjo', Georgia, serif;
      overflow: hidden;
    }

    .container {
      position: relative;
      width: 100vw;
      height: 100vh;
      z-index: 1;
    }

    /* ğŸŒŸ ë°˜ì§ì´ íš¨ê³¼ ë ˆì´ì–´ */
    .sparkle-overlay {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      background-image: radial-gradient(white 1px, transparent 1px);
      background-size: 4px 4px;
      opacity: 0.12;
      animation: sparkleMove 3s linear infinite;
      z-index: 0;
    }

    @keyframes sparkleMove {
      0% { background-position: 0 0; }
      100% { background-position: 100% 100%; }
    }

    .typing-output {
      position: absolute;
      top: 45%;
      left: 58%;
      width: 34%;
      transform: translate(-50%, -50%);
      font-size: 18px;
      color: #ccc;
      line-height: 1.8;
      white-space: pre-wrap;
      word-break: break-word;
      letter-spacing: 0.03em;
      z-index: 2;
    }

    .typing-output div {
      margin: 0;
      padding: 0;
      line-height: 1.8;
    }

    .typing-output .typed {
      color: #000;
    }

    .typing-input {
      position: absolute;
      bottom: 16%;
      left: 10%;
      width: 80%;
      font-size: 16px;
      padding: 6px;
      background: transparent;
      border: none;
      outline: none;
      color: #555;
      letter-spacing: 0.02em;
      z-index: 2;
    }

    .left-box {
      position: absolute;
      top: 26%;
      left: 11%;
      width: 540px;
      height: 560px;
      cursor: pointer;
      z-index: 3;
    }

    .media-container {
      width: 100%;
      height: 100%;
    }

    .media-container iframe,
    .media-container img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      border: none;
    }

    .mode-btn {
      position: absolute;
      top: 14.6%;
      left: 10.5%;
      font-size: 43px;
      padding: 15px 21px;
      background: transparent;
      border: none;
      color: transparent;
      cursor: pointer;
      font-family: 'Nanum Myeongjo', serif;
      z-index: 10;
    }

    .mode-btn:hover {
      text-decoration: underline;
    }
  </style>
</head>
<body>
  <!-- ğŸŒŸ ë°˜ì§ì´ ë°°ê²½ ë ˆì´ì–´ -->
  <div class="sparkle-overlay"></div>

  <div class="container">
    <button class="mode-btn" onclick="loadRandomScript()">ë¬¸ì¥ ì—°ìŠµ</button>

    <div class="left-box" onclick="insertMedia()">
      <div class="media-container" id="mediaBox"></div>
    </div>

    <div id="output" class="typing-output"></div>
    <input id="input" class="typing-input" type="text" placeholder="Type here and press Enter..." />
  </div>

  <script>
    const input = document.getElementById("input");
    const output = document.getElementById("output");

    let lines = [];
    let currentLine = 0;
    let practiceMode = false;

    const sentencePool = [
      "í–‡ì‚´ ê°€ë“í•œ ì˜¤í›„, ê·¸ë…€ëŠ” ì¢‹ì•„í•˜ëŠ” ë…¸ë˜ë¥¼ ë“¤ìœ¼ë©° ê³µì› ë²¤ì¹˜ì— ì•‰ì•„ ìˆì—ˆë‹¤.",
      "ì‹œì¦Œì„ ì´í•´í•˜ë ¤ëŠ” ë…¸ë ¥ì€ ì‚¬ëŒì˜ ë˜ ë‹¤ë¥¸ ì´ë¦„ì´ë‹¤.",
      "ê·¸ ë‚ ì˜ ì›ƒìŒì†Œë¦¬ëŠ” ì•„ì§ë„ ê·“ê°€ì— ì„ ëª…í•˜ë‹¤.",
      "ì‘ì€ ìƒˆë“¤ì´ ë‚˜ë­‡ê°€ì§€ ì‚¬ì´ë¥¼ ë‚ ì•„ë‹¤ë‹ˆê³ , ë°”ëŒì€ ë‚˜ë­‡ìì„ ë¶€ë“œëŸ½ê²Œ í”ë“¤ì—ˆë‹¤.",
      "ê·¸ ìˆœê°„ë§Œí¼ì€ ì„¸ìƒì— í˜¼ì ìˆëŠ” ê²ƒì²˜ëŸ¼ ê³ ìš”í•˜ê³  í‰í™”ë¡œì› ë‹¤.",
      "ìš°ë¦¬ëŠ” ëŠ˜ ê·¸ë ‡ê²Œ ì„œë¡œë¥¼ ëª¨ë¥¸ ì±„ ì§€ë‚˜ì¹˜ê¸° ì¼ì‘¤ì˜€ë‹¤.",
      "êµ¬ì†ì€ ëŠ˜ ê·¸ë ‡ê²Œ ì„œì„œíˆ ë‹¨ë‹¨íˆ ìŠ¤ë©°ë“¤ì–´ ì˜¨ë‹¤.",
      "ê·¸ëŠ” ë‹¤ì •í•œ ëˆˆë¹›ìœ¼ë¡œ ë‚˜ë¥¼ ë°”ë¼ë³´ë©° ì¡°ìš©íˆ ë§í–ˆë‹¤.",
      "ì‚¬ë‘ì€ ê²°êµ­ ë§ˆìŒì„ ë‹´ì•„ ì „í•˜ëŠ” ì‘ì€ í–‰ë™ì—ì„œ ì‹œì‘ëœë‹¤.",
      "ì„¸ìƒì´ ì–´ê¹¨ë¥¼ ìŠ¤ì¹˜ëŠ” ì •ë„ë¡œ ë°”ì˜ê²Œ í˜ëŸ¬ê°ˆ ë•Œê°€ ìˆë‹¤.",
      "ë‚¯ì„  ê±°ë¦¬ì—ì„œë„ ìµìˆ™í•œ ë§ˆìŒì„ ë°œê²¬í•  ìˆ˜ ìˆë‹¤.",
      "ë¹„ ë‚´ë¦¬ëŠ” ê±°ë¦¬ë¥¼ í•¨ê»˜ ê±·ë˜ ê·¸ ì¥ë©´ì´ ìê¾¸ ë– ì˜¤ë¥¸ë‹¤.",
      "ë‚´ ë²„ë¦¬ëŠ” ê¸°ì–µì„ ë®ê³  ê¸´ ì ì— ìì£¼ ë¨¸ë¬¸ë‹¤.",
      "ì°½ë°–ì„ ë°”ë¼ë³´ë©° íë¥´ëŠ” ê·¸ ë‚ ì˜ ê¸°ì–µì€ ëŠ˜ ë”°ëœ»í•˜ë‹¤.",
      "ìš°ë¦¬ëŠ” ê·¸ë ‡ê²Œ ì¡°ìš©íˆ ì„œë¡œì˜ ë§ˆìŒì— ë¨¸ë¬¼ë €ë‹¤."
    ];

    function shuffleAndPick(array, count) {
      const shuffled = array.slice().sort(() => Math.random() - 0.5);
      return shuffled.slice(0, count);
    }

    function loadRandomScript() {
      lines = shuffleAndPick(sentencePool, 15);
      currentLine = 0;
      practiceMode = true;
      renderOutput();
      renderPreview();
    }

    function renderOutput() {
      output.innerHTML = lines.map((line, index) => {
        if (index < currentLine) {
          return `<div class="typed">${line}</div>`;
        } else if (index === currentLine) {
          return `<div id="current-line">${colorizeTypedPortion(line, "")}</div>`;
        } else {
          return `<div>${line}</div>`;
        }
      }).join("");
    }

    function renderPreview() {
      if (practiceMode && currentLine < lines.length) {
        input.value = "";
        input.placeholder = lines[currentLine];
      }
    }

    function colorizeTypedPortion(line, typed) {
      let html = "";
      for (let i = 0; i < line.length; i++) {
        if (typed[i]) {
          html += `<span class="typed">${line[i]}</span>`;
        } else {
          html += `<span>${line[i]}</span>`;
        }
      }
      return html;
    }

    input.addEventListener("input", function () {
      if (!practiceMode || currentLine >= lines.length) return;
      const typed = input.value;
      const correct = lines[currentLine];
      const corrected = correct.slice(0, typed.length);
      const currentEl = document.getElementById("current-line");
      if (currentEl) {
        currentEl.innerHTML = colorizeTypedPortion(correct, corrected);
      }
    });

    input.addEventListener("keydown", function (e) {
      if (e.key === "Enter") {
        if (practiceMode && currentLine < lines.length) {
          currentLine++;
          if (currentLine === lines.length) {
            setTimeout(() => {
              lines = [];
              output.innerHTML = "";
              input.placeholder = "Type here and press Enter...";
              practiceMode = false;
            }, 800);
          } else {
            renderOutput();
            renderPreview();
          }
        } else {
          const text = input.value.trim();
          if (!text) return;
          input.value = "";
          let i = 0;
          const interval = setInterval(() => {
            if (i < text.length) {
              output.innerHTML += `<span style="color:#000">${text[i]}</span>`;
              i++;
            } else {
              clearInterval(interval);
              output.innerHTML += "<br>";
            }
          }, 40);
        }
      }
    });

    function insertMedia() {
      const url = prompt("GIF, ì´ë¯¸ì§€ ì£¼ì†Œ ë˜ëŠ” YouTube ë§í¬ë¥¼ ì…ë ¥í•˜ì„¸ìš”:");
      const box = document.getElementById("mediaBox");
      if (!url) return;

      if (url.includes("youtube.com") || url.includes("youtu.be")) {
        let embedUrl = url;
        if (url.includes("watch?v=")) {
          const id = url.split("watch?v=")[1].split("&")[0];
          embedUrl = `https://www.youtube.com/embed/${id}`;
        } else if (url.includes("youtu.be")) {
          const id = url.split("youtu.be/")[1];
          embedUrl = `https://www.youtube.com/embed/${id}`;
        }
        box.innerHTML = `<iframe src="${embedUrl}" frameborder="0" allowfullscreen></iframe>`;
      } else if (url.match(/\.(gif|jpg|jpeg|png)$/i)) {
        box.innerHTML = `<img src="${url}" alt="media">`;
      } else {
        alert("ì§€ì›ë˜ì§€ ì•ŠëŠ” í˜•ì‹ì…ë‹ˆë‹¤. GIF, ì´ë¯¸ì§€, YouTube ë§í¬ë§Œ ì§€ì›ë©ë‹ˆë‹¤.");
      }
    }
  </script>
</body>
</html>

